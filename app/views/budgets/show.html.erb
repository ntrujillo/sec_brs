<p id="notice"><%= notice %></p>

<p>
  <strong>Name:</strong>
  <%= @budget.name %>
</p>
<p>
  <strong>Fiscal year:</strong>
  <%= @budget.fiscal_year %>
</p>

<p>
  <strong>Budgeted:</strong>
  <%= @budget.budgeted %>
</p>

<p>
  <strong>Spent:</strong>
  <%= @budget.spent %>
</p>

<p>
  <strong>Pending:</strong>
  <%= @budget.pending %>
</p>

<p>
  <strong>Balance:</strong>
  <%= @budget.balance %>
</p>

<p>
  <strong>Active:</strong>
  <%= @budget.active %>
</p>

<p>
  <strong>Locked:</strong>
  <%= @budget.locked %>
</p>

<p>
  <strong>Default:</strong>
  <%= @budget.default %>
</p>

<table>
  <thead>
    <tr>
      <th>Categories/Subcategories</th>
      <th>Budgeted</th>
      <th>Spent</th>
      <th>Pending</th>
      <th>Balance</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @budget_categories.each do |category_id| %>
      <tr>
        <td><%= BudgetCategory.find(category_id).name %></td>
        <td><%= BudgetCategory.find(category_id).budgeted %></td>
        <td><%= BudgetCategory.find(category_id).spent %></td>
        <td><%= BudgetCategory.find(category_id).pending %></td>
        <td><%= BudgetCategory.find(category_id).balance %></td>
      </tr>

      <tr>
        <td> --- </td>
      </tr>

      <% BudgetCategory.find(category_id).budget_subcategory_ids.each do |subcategory_id| %>
        <tr>
          <td><%= BudgetSubcategory.find(subcategory_id).name %></td>
          <td><%= BudgetSubcategory.find(subcategory_id).budgeted %></td>
          <td><%= BudgetSubcategory.find(subcategory_id).spent %></td>
          <td><%= BudgetSubcategory.find(subcategory_id).pending %></td>
          <td><%= BudgetSubcategory.find(subcategory_id).balance %></td>
        </tr>
      <% end %>

    <% end %>
  </tbody>
</table>

<% if @user.permission_type == "admin" %>
  <%= link_to 'Edit', edit_budget_path(@budget) %> |
  <%= link_to 'Back', budgets_path %>
<% end %>
